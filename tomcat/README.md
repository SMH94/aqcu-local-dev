# Setting Up NWIS-RA Tomcat

1. Download Tomcat 8.0.xx from: https://tomcat.apache.org/download-80.cgi

2. Unzip tomcat into this directory and name it `nwisra`. The final structure should look something like this for the tomcat launch script `bin/catalina.sh`: `aqcu-local-dev/tomcat/nwisra/bin/catalina.sh`. You may need to chmod a+x the *.bat and *.sh files in the `bin/` directory for later steps to work.

3. Download the ojdbc7.jar driver from here: https://www.oracle.com/technetwork/database/features/jdbc/jdbc-drivers-12c-download-1958347.html

4. Place the downloaded jar into the `lib` directory of the `nwisra` tomcat instance.

5. Copy the server.xml and context.xml for the tomcat instance from the `conf-reference/nwisra` subdiretory of this folder (`aqcu-local-dev/tomcat/conf-reference/nwisra`) into the `nwisra` tomcat `conf` folder and replace the existing `server.xml` and `context.xml`.

6. Open the `context.xml` file in your `nwisra` tomcat `conf` directory and replace the placeholder variables with actual values:
   - **PUT_NATDB_CONNECTION_URL_HERE** - The URL for the NatDB instance to connect to
   - **PUT_NATDB_DATABASE_NAME_HERE** - The name of the database on the NatDB instance to connect to
   - **PUT_NATDB_USERNAME_HERE** - The username to use for NatDB
   - **PUT_NATDB_PASSWORD_HERE** - The password to use for NatDB

7. Open the `server.xml` file in your `nwisra` tomcat `conf` directory and replace the placeholder variables with actual values:
   - **POINT_ME_TO_FULL_PATH_OF_KEYSTORE** - The full asbolute (non-relative) path to the keystore file generated by the create_certificates script run in the `ssl` directory of this project.

8. Run the `download-wars.sh` script (run `chmod +x download-wars.sh` if the script is not executable) in the `conf-reference/nwisra` directory and copy the downloaded WAR files from the created `webapps` directory into the `webapps` directory of the `nwisra` tomcat instance.